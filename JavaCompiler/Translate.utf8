Â·Â·Â·
usage: java -D"file.encoding=UTF-8" -jar â€¦
Â·Â·Â·
âŸ¦import java.nio.file.*;âŸ§
Â§ import java.
  io.IOException
  nio.file.attribute.BasicFileAttributes
  util.HashSet

â–  Translate
  static
  â–¶ main âº argsâ¦‚ String[]
    if args.length > 0 and args[0] â‰ˆ "--help"
       System.out.println "Usage: java -D\"file.encoding=UTF-8\"
          -jar Translate.jar [--help] [--root <path>] [--depth #]
                             [--file <pattern>] [--overwrite]"
    ÍDefault options:
    rootâ¦‚ String: "."
    depthâ¦‚ int: Integer.MAX_VALUE
    fileâ¦‚ String: "*.utf8"
    âƒ«ugly wrapper for outer variable accessed from inner class:
    final overwriteâ¦‚ boolean[]: [ false ]
    
    ÍManual options:
    âˆ€ i âˆˆ 0 â€¦ args.length
      âˆ¢ args[i]
        â¬© "--root"      â­† root: args[â—¤i]
        â¬© "--depth"     â­† depth: java.lang.Integer.parseInt args[â—¤i]
        â¬© "--file"      â­† file: args[â—¤i]
        â¬© "--overwrite" â­† overwrite[0]: true

    try
       final matcherâ¦‚ PathMatcher:
             FileSystems.getDefaultÂ°.getPathMatcher "glob:*/" + file
       Files.walkFileTree (Paths.get root), *HashSetâŸ¨FileVisitOptionâŸ©Â°,
                           depth, *SimpleFileVisitorâŸ¨PathâŸ©Â° â– 
           â–¶ visitFileâ¦‚ FileVisitResult ğŸŒ  IOException
           âº pathâ¦‚ Path
           âº attributesâ¦‚ BasicFileAttributes
             if matcher.matches path
                destinationâ¦‚ String: path.toStringÂ°.(substring 0,
                             path.toStringÂ°.lastIndexOf ".") âŠ• ".java"
                if Â¬ Files.exists Paths.get destination or overwrite[0]
                     lexerâ¦‚ Lexer *String Files.readAllBytes â†µ
                                          Paths.get path.toStringÂ°
                     compilerâ¦‚ JavaCompilerÂ°
                     âˆ€ line âˆˆ lexer.getLinesÂ° â¦‚ Line
                       compiler.compile line
                     Files.write (Paths.get destination),
                                 (compiler.getSourceÂ°.getBytes "utf-8"),
                                  StandardOpenOption.CREATE,
                                  StandardOpenOption.TRUNCATE_EXISTING
             return FileVisitResult.CONTINUE

           â–¶ visitFileFailedâ¦‚ FileVisitResult ğŸŒ  IOException
           âº fileâ¦‚ Path
           âº exceptionâ¦‚ IOException
             return FileVisitResult.CONTINUE

    catch eâ¦‚ IOException
      System.out.println "â¸¨e.getClassÂ°.getSimpleNameÂ°â¸© - â¸¨e.getMessageÂ°â¸©"
